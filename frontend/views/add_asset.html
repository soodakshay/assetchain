{% extends "./layout.html" %}

{% block css %}
<!--
<link rel="stylesheet" href="../../assets/global/plugins/jquery-ui/jquery-ui.min.css"/>-->


<link rel="stylesheet" href="/jquery-ui-1.12.1.custom/jquery-ui.css"/>


<style>
    .md-radio label > .box {

        z-index: 0;

    }
    .md-radio label > .check { 
        z-index: 0;
    }
</style>

{% endblock%}


{% block content %}

<div class="page-content">
    <!-- BEGIN PAGE HEADER-->
    <h3 class="page-title">
        Add New Asset
    </h3>
    <div class="page-bar">
        <ul class="page-breadcrumb">
            <li>
                <i class="fa fa-home"></i>
                <a href="/assets/add">Add New Asset</a>
            </li>
        </ul>
    </div>
    <div class="row"><br/></div>
    <!-- END PAGE HEADER-->
    <div class="portlet-body form">
        {% include "./flashMessage.html" %}<!--include file for flash messages -->
        <!-- BEGIN FORM-->
        <form method="post" action="/assets/add" class="add-asset horizontal-form" >
            <div class="form-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="control-label">Select Category:</label>
                            <span class="star">*</span>
                            <select name="category_name" id="category_name" class="form-control">
                                {% if !categories.length %}
                                <option value="">Please first add the category</option>

                                {% else %}
                                <option value="">Select One</option>
                                {%for category in categories %}
                                <option data-id="{{category.Key}}" value="{{category.Record.name}}"> {{category.Record.name}}</option>  
                                {%endfor%}
                                {%endif%}
                            </select>    
                        </div>
                    </div>
                </div>

                <input type="hidden" name="categoryid" id="categoryid" value="">
                <!--                <input type="hidden" name="categoryid" id="categoryid" value="bbjag98b89c5nti11a70"  readonly>     -->

                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label for= "name" class="control-label">Asset Name:</label>
                            <span class="star">*</span>
                            <input type="text" name="name" id="name" class="form-control" placeholder="Enter asset name" autocomplete="off" required>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for= "asset_number" class="control-label">Asset Number:</label>
                            <span class="star">*</span>
                            <input type="text" name= "asset_number" id="asset_number" class="form-control" autocomplete="off" placeholder="Enter asset number" required>

                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="serial_number" class="control-label">Serial Number:</label>
                            <span class="star">*</span>
                            <input type="text" id="serial_number" name="serial_number" class="form-control" autocomplete="off" placeholder="Enter serial number" required>

                        </div>
                    </div>
                </div>
<!--                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="color" class="control-label">Device Color:</label>

                                                        <div class="input-group color colorpicker-default" id="colorPlace" data-color="#3865a8" data-color-format="rgba">
                            <input type="text" id="color" name="color" class="form-control" autocomplete="off" placeholder="Enter device color"  >
                                                            <span class="input-group-btn">
                                                                <button class="btn default" type="button"><i style="background-color: #3865a8;"></i>&nbsp;</button>
                                                            </span>
                        </div>

                                                    <input type="text" id="color" name="color" class="form-control" autocomplete="off" placeholder="Enter device color" required>
                    </div>

                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="quantity" class="control-label">Quantity:</label>
                                                
                                                <input type="text" name="quantity" id="quantity" class="form-control" autocomplete="off" placeholder="Enter quantity" readonly="" >
                                            </div>
                                        </div>
                </div>-->
                <div class="row">
                    <!--                    <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="purchase_date" class="control-label">Purchase Date:</label>
                                                <span class="star">*</span>
                                                <div class="input-group  date date-picker"  id="puplace"  data-date-format="dd/mm/yyyy" data-date-end-date="0d">
                                                    <input type="text"  id="purchase_date" name="purchase_date" class="form-control" autocomplete="off" readonly required>
                                                    <span class="input-group-btn">
                                                        <button class="btn default" type="button"><i class="fa fa-calendar"></i></button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>-->
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="purchase_date" class="control-label">Purchase Date:</label>

                            <!--                            <div class="input-group  date date-picker"  id="puplace"  data-date-format="dd/mm/yyyy" data-date-end-date="0d">-->
                            <input type="text"  id="purchase_date" name="purchase_date" class="form-control" autocomplete="off"  placeholder="Select purchase date"  readonly >
                            <!--                                <span class="input-group-btn">
                                                                <button class="btn default" type="button"><i class="fa fa-calendar"></i></button>
                                                            </span>-->
                            <!--                            </div>-->
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="purchasing_amount" class="control-label">Purchasing amount:</label>

                            <input type="text" id="purchasing_amount" name="purchasing_amount" class="form-control" autocomplete="off" placeholder="Enter purchasing amount" >
                        </div>
                    </div>
                </div>
                <div class="row">
                    <!--                    <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="warranty_upto" class="control-label">Warranty Upto:</label>
                                                <span class="star">*</span>
                                                <div class="input-group  date date-picker " id="wplace"  data-date-format="dd/mm/yyyy" >
                                                    <input type="text"   name="warranty_upto" id="warranty_upto" class="form-control" autocomplete="off" readonly required>
                                                    <span class="input-group-btn ">
                                                        <button class="btn default" type="button"><i class="fa fa-calendar"></i></button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>-->
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="warranty_upto" class="control-label">Warranty Upto:</label>

                            <!--                            <div class="input-group  date date-picker " id="wplace"  data-date-format="dd/mm/yyyy" >-->
                            <input type="text"   name="warranty_upto" id="warranty_upto" class="form-control" autocomplete="off"  placeholder="Select warranty date" readonly >
                            <!--                                <span class="input-group-btn ">
                                                                <button class="btn default" type="button"><i class="fa fa-calendar"></i></button>
                                                            </span>-->
                            <!--                            </div>-->
                        </div>
                    </div>
                      <div class="col-md-6">
                        <div class="form-group">
                            <label for="color" class="control-label">Device Color:</label> 
                            <input type="text" id="color" name="color" class="form-control" autocomplete="off" placeholder="Enter device color"  >      
                        </div> 
                    </div>
                    
                </div>
                <div class="row">
                  
                    <div class="col-md-6">
                        <div class="form-group form-md-radios">
                            <label>Status</label>
                            <div class="md-radio-inline">
                                <div class="md-radio">
                                    <input type="radio" id="active" name="status" class="md-radiobtn" value="1" checked >
                                    <label for="active">
                                        <span></span>
                                        <span class="check"></span>
                                        <span class="box"></span>
                                        Active </label>
                                </div>
                                <div class="md-radio">
                                    <input type="radio" id="inactive" name="status" class="md-radiobtn" value="0" >
                                    <label for="inactive">
                                        <span></span>
                                        <span class="check"></span>
                                        <span class="box"></span>
                                        Inactive </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="description" class="control-label">Additional Description:</label>

                            <textarea class="form-control" name="description" id="description" rows="3"  ></textarea>

                        </div>
                    </div>
                </div>


                <!--                <div class="row">
                                    <div class="col-md-6">
                
                                        <div class="form-group">
                                            <label for="bill_reciept" class="control-label">Attach Bill:</label>
                                            <span class="star">*</span>
                                            <span class="btn green fileinput-button">
                                                <i class="fa fa-plus"></i>
                                                <span>
                                                    Upload PDF </span>
                                                <input type="file" id="bill" name="bill_reciept" required>
                                            </span>  
                                        </div>
                                    </div>
                                </div >-->
                <!--                        <div class="col-md-3">
                                            <div class="display_bill" ></div>
                                        </div>-->

                <div class="form-actions right">
                    <a  href="/assets" class="btn btn info">Cancel</a>
                    <button type="submit"   class="btn blue"><i class="fa fa-check"></i> Submit</button>
                </div>
            </div>

        </form>

    </div>


    {% endblock %}


    <!--
    Javascript Block Begins
    -->
    {% block js %}

    <script src="../../assets/global/plugins/bootbox/bootbox.min.js" type="text/javascript"></script>
    <script src="../../assets/global/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
    <script type="text/javascript">

$(document).ready(function () {
    //ComponentsPickers.init();
    // UIAlertDialogApi.init();
    //set date picker
    $("#purchase_date").datepicker({
        dateFormat: 'dd/mm/yy',
        changeMonth: true,
        changeYear: true,
        maxDate: '0',
        onSelect: function (date) {
            //Set Minimum Date of EndDatePicker After Selected Date of StartDatePicker
            $("#warranty_upto").datepicker("option", "minDate", date);
            $("#purchase_date").removeClass("error");
            $("#purchase_date-error").empty();


        }
    });
    $("#warranty_upto").datepicker({
        dateFormat: 'dd/mm/yy',
        changeMonth: true,
        onSelect: function (date) {
            $("#warranty_upto").removeClass("error");
            $("#warranty_upto-error").empty();
        }
    });



    //form validation

    $(".add-asset").validate({

        rules: {
            category_name: {
                required: true
            },
            status: {
                required: true,

            },
            name: {
                required: true,
                minlength: 3,
                maxlength: 32
            },
            asset_number: {
                required: true,
                maxlength: 32,
                digits: true
            },
            serial_number: {
                required: true,
                maxlength: 32
            }
//            quantity: {
//                required: true,
//                maxlength: 15
//
//            }
//            ,
//             purchasing_amount: {
//                required: true,
//                maxlength: 25,
//
//            }
//            color: {
//                required: true,
//                maxlength: 15
//            },

//            purchase_date: {
//                required: true
//
//            },

//            warranty_upto: {
//                required: true
//
//            },
//            description: {
//                required: true,
//                minlength: 5,
//                maxlength: 255
//            }

        },
        messages: {
            category_name: {
                required: "Please select the category"
            },
            name: {
                required: "Please enter asset name",
                minlength: "minimum length must be three characters",
                maxlength: "maximum length must be thirty two characters"

            },

            status: {
                required: "please mention status(active etc)"
            },
            asset_number: {
                required: "Please enter asset number",
                maxlength: "maximum length must be thirty two characters"

            },
            serial_number: {
                required: "Please enter serial number",
                maxlength: "maximum length must be thirty two characters"

            }
//            ,
//            color: {
//                required: "Please select the color",
//                maxlength: "maximum length must be 15 characters",
//
//            },
//            quantity: {
//                required: "Please enter quantity in numbers",
//                maxlength: "maximum length must be 15 characters",
//
//            },
//            purchase_date: {
//                required: "Select  purchase date ",
//
//            },
//            purchasing_amount: {
//                required: "Please mention purchase amount",
//                maxlength: 25
//            },
//            warranty_upto: {
//                required: "Select warranty date "
//
//            }

//            description: {
//              
//                minlength: "minimun length should be 5",
//                maxlength: "maximum length must be 255"
//            }

        },

        errorPlacement: function (error, element) {
            error.insertAfter(element);
        },
        submitHandler: function (form, event) {
            event.preventDefault();
            bootbox.confirm({
                message: "Are you sure you want to add the asset?",
                buttons: {
                    confirm: {
                        label: 'Yes',
                        className: 'btn-success'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-danger'
                    }
                },
                callback: function (result) {
                    console.log('This was logged in the callback: ' + result);
                    if (result) {
                        form.submit();
                    }
                }
            });
        }
    });

    //**********get category id and set in hidden field********

    $('select').change(function () {
        //alert($(this).children('option:selected').data('id'));
        var categoryid = $(this).children('option:selected').data('id');
        $("#categoryid").val(categoryid);

    });

    //disable input text input from user  
    $('#purchase_date').keydown(function () {
        return false;
    });
    $('#warranty_upto').keydown(function () {
        return false;
    });
});
    </script>

    {% endblock %}



